"~/.config/nvim/init.vim

" Arrow keys disabled
    nmap <Up> <NOP>
    nmap <Down> <NOP>
    nmap <Left> <NOP>
    nmap <Right> <NOP>
    imap <Up> <NOP>
    imap <Down> <NOP>
    imap <Left> <NOP>
    imap <Right> <NOP>
    vmap <Up> <NOP>
    vmap <Down> <NOP>
    vmap <Left> <NOP>
    vmap <Right> <NOP>

" Status bar
    set showcmd
    set laststatus=2

" Indent
    set tabstop=4
    set shiftwidth=4
    set softtabstop=4
    set expandtab
    set autoindent
    set smartindent

" Search
    set nohlsearch

" Line number
    set nu
    set relativenumber

" Max chars per line
    set colorcolumn=80
    set textwidth=80

" Specific language config (TODO augroup)
    filetype on
    autocmd FileType ruby,tex,html,javascript,css
        \ setlocal shiftwidth=2 tabstop=2 softtabstop=2

" Launch zathura with current latex script name, but with .pdf extension
    autocmd FileType tex nnoremap <F9>
        \ <esc>:!FILENAME=%; zathura ${FILENAME\%.*}.pdf &<CR><CR>

" Executing scripts (without passing args)
    autocmd FileType ruby nnoremap <F9> <esc>:w<CR>:term ruby %<CR>i
    autocmd FileType python nnoremap <F9> <esc>:w<CR>:term python3 %<CR>i
    autocmd FileType lua nnoremap <F9> <esc>:w<CR>:term lua %<CR>i
    autocmd FileType sh nnoremap <F9> <esc>:w<CR>:term bash %<CR>i
    autocmd FileType zsh nnoremap <F9> <esc>:w<CR>:term zsh %<CR>i
    autocmd FileType awk nnoremap <F9> <esc>:w<CR>:term awk -f %<CR>i
    autocmd FileType html nnoremap <F9> <esc>:w<CR>:!chromium % &<CR><CR>
    autocmd FileType perl nnoremap <F9> <esc>:w<CR>:term perl %<CR>i
    autocmd FileType javascript nnoremap <F9> <esc>:w<CR>:term node %<CR>i

" Executing scripts (passing args, ie. no <CR> at the end)
    autocmd FileType ruby nnoremap <F10> <esc>:w<CR>:term ruby %
    autocmd FileType python nnoremap <F10> <esc>:w<CR>:term python3 %
    autocmd FileType lua nnoremap <F10> <esc>:w<CR>:term lua %
    autocmd FileType sh nnoremap <F10> <esc>:w<CR>:term bash %
    autocmd FileType zsh nnoremap <F10> <esc>:w<CR>:term zsh %
    autocmd FileType awk nnoremap <F10> <esc>:w<CR>:term awk -f %
    autocmd FileType perl nnoremap <F10> <esc>:w<CR>:term perl %
    autocmd FileType javascript nnoremap <F10> <esc>:w<CR>:term node %
    
" Misc
    set ttimeoutlen=100

" Normal Mapping (:help map-which-keys)
    " Go to previous tab
        nnoremap , gT

    " Throws the content after the cursor to the line below
        nnoremap <C-j> i<Enter><esc>k$
        
" Insert Mapping
    " Change word case
        imap <C-u> <esc>gUiwea

" Commands
    command Nvimrc tabe ~/.config/nvim/init.vim
    command Mainsplit vertical resize 84 

" Plugins (requires: https://github.com/junegunn/vim-plug)
    call plug#begin('~/.config/nvim/bundle')
        " Adds the indent object (try: <normal>dii)
            Plug 'michaeljsmith/vim-indent-object'

        " Surrounding stuff
            Plug 'tpope/vim-surround'

        " More motions
            Plug 'wellle/targets.vim'

        " Latex live preview
            Plug 'donRaphaco/neotex', { 'for': 'tex' }

        " JSX syntax highlight (React)
            Plug 'pangloss/vim-javascript'
            Plug 'mxw/vim-jsx'

        " Ranger plugin
            Plug 'rafaqz/ranger.vim'
    call plug#end()

" Latex plugin
    let g:tex_flavor = 'latex'     " To avoid issues. See :h:tex_flavor
    nnoremap <leader>le :NeoTexOn<CR>
    nnoremap <leader>ld :NeoTexOff<CR>

" Ranger plugin
    map <F2> :RangerTab<CR>
    map <F3> :RangerVSplit<CR>
    map <F4> :RangerSplit<CR>

" Color
    set cursorline
    highlight ColorColumn ctermbg=darkgray

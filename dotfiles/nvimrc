"~/.config/nvim/init.vim

" Arrow keys disabled
    nmap <Up> <NOP>
    nmap <Down> <NOP>
    nmap <Left> <NOP>
    nmap <Right> <NOP>
    imap <Up> <NOP>
    imap <Down> <NOP>
    imap <Left> <NOP>
    imap <Right> <NOP>
    vmap <Up> <NOP>
    vmap <Down> <NOP>
    vmap <Left> <NOP>
    vmap <Right> <NOP>

" Status bar
    set showcmd
    set laststatus=2

" Indent
    set tabstop=4
    set shiftwidth=4
    set softtabstop=4
    set expandtab
    set autoindent
    set smartindent

" Search
    set nohlsearch

" Line number
    set nu
    set relativenumber

" Max chars per line
    set colorcolumn=80
    set textwidth=80
    highlight ColorColumn ctermbg=darkgray

" Specific language config
    filetype on
    autocmd FileType ruby setlocal shiftwidth=2 tabstop=2 softtabstop=2
    autocmd FileType tex setlocal shiftwidth=2 tabstop=2 softtabstop=2

" Launch zathura with current latex script name, but with .pdf extension
    autocmd FileType tex nnoremap <F9>
        \ <esc>:!FILENAME=%; zathura ${FILENAME\%.*}.pdf &<CR><CR>

" Executing scripts (without passing args)
    autocmd FileType ruby nnoremap <F9> <esc>:w<CR>:term ruby %<CR>i
    autocmd FileType python nnoremap <F9> <esc>:w<CR>:term python3 %<CR>i
    autocmd FileType lua nnoremap <F9> <esc>:w<CR>:term lua %<CR>i
    autocmd FileType sh nnoremap <F9> <esc>:w<CR>:term bash %<CR>i
    autocmd FileType zsh nnoremap <F9> <esc>:w<CR>:term zsh %<CR>i
    autocmd FileType awk nnoremap <F9> <esc>:w<CR>:term awk -f %<CR>i

" Executing scripts (passing args, ie. no <CR> at the end)
    autocmd FileType ruby nnoremap <F10> <esc>:w<CR>:term ruby %
    autocmd FileType python nnoremap <F10> <esc>:w<CR>:term python3 %
    autocmd FileType lua nnoremap <F10> <esc>:w<CR>:term lua %
    autocmd FileType sh nnoremap <F10> <esc>:w<CR>:term bash %
    autocmd FileType zsh nnoremap <F10> <esc>:w<CR>:term zsh %
    autocmd FileType awk nnoremap <F10> <esc>:w<CR>:term awk -f %
    
" Misc
    set ttimeoutlen=100

" Normal Mapping (:help map-which-keys)
    " Go to previous tab
        nnoremap , gT

    " Throws the content after the cursor to the line below
        nnoremap <C-j> i<Enter><esc>k$

    " Enter (aka return) inserts new line below cursor (normal mode)
        nnoremap <CR> o<esc>

    " Next/back uppercase letter, useful for CamelCase identifiers
        nnoremap <silent> ]w :call search('\u')<CR>
        nnoremap <silent> [w :call search('\u', 'b')<CR>

    " Next/back underscore, useful for snake_case identifiers
        nnoremap <silent> ]_ :call search('_')<CR>
        nnoremap <silent> [_ :call search('_', 'b')<CR>
        
" Insert Mapping
    " Change word case
        imap <C-u> <esc>gUiwea

" Commands
    command Nvimrc tabe ~/.config/nvim/init.vim
    command Mainsplit vertical resize 84 

" Plugins (requires: https://github.com/junegunn/vim-plug)
    call plug#begin('~/.config/nvim/bundle')
        " Adds the indent object (try: <normal>dii)
            Plug 'michaeljsmith/vim-indent-object'

        " Commenting stuff
            Plug 'scrooloose/nerdcommenter'
        
        " Surrounding stuff
            Plug 'tpope/vim-surround'

        " Ranger
            Plug 'rbgrouleff/bclose.vim' " Dependency
            Plug 'francoiscabrol/ranger.vim'

        " More motions
            Plug 'wellle/targets.vim'

        " Color scheme
            Plug 'andbar-ru/vim-unicon'

        " Latex live preview
            Plug 'donRaphaco/neotex', { 'for': 'tex' }

        " Typescript support
            Plug 'leafgarland/typescript-vim', {'do': './install.sh'}

        " Typescript syntax highlight
            Plug 'HerringtonDarkholme/yats.vim'

        " Javascript syntax highlight
            Plug 'othree/yajs.vim'

        " HTML 5
            Plug 'othree/html5.vim'
    call plug#end()

" Ranger Plugin
    let g:ranger_map_keys = 0
    map <leader>r :RangerNewTab<CR>

" Latex plugin
    let g:tex_flavor = 'latex'     " To avoid issues. See :h:tex_flavor
    nmap <leader>le :NeoTexOn<CR>
    nmap <leader>ld :NeoTexOff<CR>

" Color
    colorscheme unicon
    set background=dark
    set cursorline
